## DTOì˜ í•„ìš”ì„±

### ğŸ§ ê³µë¶€í•˜ê²Œ ëœ ê³„ê¸°
ì¡¸ì‘ì—ì„œ ê°„ë‹¨í•œ CRUD ì‘ì—…ì„ í•˜ê²Œ ë˜ì—ˆë‹¤. 
ê·¸ëŸ¬ë‚˜ APIë¥¼ ë§Œë“¤ì–´ ë³¸ ê²½í—˜ì´ ì—†ê¸° ë•Œë¬¸ì—, íŒ€ì¥ë‹˜ì´ ì§  ì½”ë“œë¥¼ ë³´ê³  ë¹„ìŠ·í•˜ê²Œ ì§œì•¼ í•˜ëŠ” ìƒí™©ì´ì—ˆë‹¤.
íŒ€ì¥ë‹˜ ì½”ë“œë¥¼ ë´¤ì„ ë•Œ, ì–´ë–¤ ê³³ì—ì„œëŠ” DTOë¥¼ ë§Œë“¤ì–´ì„œ ìš”ì²­ë°›ê±°ë‚˜ ë°˜í™˜í•˜ê³  ìˆì—ˆê³ , ì–´ë–¤ ê³³ì—ì„œëŠ” DTOë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ìˆì—ˆë‹¤.
ê·¸ë˜ì„œ ì–´ë–¤ ìƒí™©ì—ì„œ DTOë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ì§€ ì•Œê¸° ìœ„í•´ ê³µë¶€í•˜ê²Œ ë˜ì—ˆë‹¤.

### âœ”ï¸ DTOë€

> Data Transfer Objectì˜ ì•½ìë¡œ, ê³„ì¸µ ê°„ ë°ì´í„° ì „ì†¡ì„ ìœ„í•´ ë„ë©”ì¸ ëª¨ë¸ ëŒ€ì‹  ì‚¬ìš©ë˜ëŠ” ê°ì²´ë‹¤.

![img_3.png](img_3.png)

DTOëŠ” ìˆœìˆ˜í•˜ê²Œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³ , ë°ì´í„°ì— ëŒ€í•œ getter, setter ë§Œì„ ê°€ì ¸ì•¼ í•œë‹¤.

DTOëŠ” ì–´ë– í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë„ ê°€ì ¸ì„  ì•ˆë˜ë©°, ì €ì¥, ê²€ìƒ‰, ì§ë ¥í™”, ì—­ì§ë ¬í™” ë¡œì§ë§Œì„ ê°€ì ¸ì•¼ í•œë‹¤.

### âœ”ï¸ DTOì˜ í•„ìš”ì„±

#### 1.DTOë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì„ ê²½ìš° ì—”í‹°í‹°ì˜ ë³€ê²½ì— ì˜í•´ API ìŠ¤í™ì´ ë³€ê²½ë  ìˆ˜ ìˆë‹¤.
   
> - ì—”í‹°í‹°ì™€ APIê°€ ì¼ëŒ€ì¼ ëŒ€ì‘ ê´€ê³„ë¥¼ ê°€ì§„ë‹¤ë©´, ì—”í‹°í‹°ì— ìˆ˜ì •ì´ ì¼ì–´ë‚  ë•Œë§ˆë‹¤ API ìŠ¤í™ì„ ì¼ì¼íˆ ë³€ê²½í•´ì£¼ì–´ì•¼ í•œë‹¤.
> - ì´ëŠ” ë§¤ìš° ë²ˆê±°ë¡œìš´ ì‘ì—…ì´ë©°, ì»´íŒŒì¼ ì—ëŸ¬ë¡œ ê°ì§€í•  ìˆ˜ë„ ì—†ì–´ ì—ëŸ¬ ì›ì¸ì„ ì°¾ê¸°ê°€ ì–´ë µë‹¤.
> - DTOë¥¼ ì‚¬ìš©í•˜ë©´ DTO->ì—”í‹°í‹° ê³¼ì •ì—ì„œ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.

#### 2.í•˜ë‚˜ì˜ ì—”í‹°í‹°ì— ëŒ€í•´ì„œëŠ” APIê°€ ì—¬ëŸ¬ê°œ ì¡´ì¬í•  ìˆ˜ ìˆë‹¤.
> - ê°ê°ì˜ APIê°€ ìš”êµ¬í•˜ëŠ” ì—”í‹°í‹°ì— ëŒ€í•œ ë°ì´í„°ëŠ” ëª¨ë‘ ë‹¤ë¥¼ í™•ë¥ ì´ ë†’ë‹¤. 
> - ì´ ë•Œ, ê·¸ëƒ¥ ì—”í‹°í‹°ì˜ ëª¨ë“  ì •ë³´ë¥¼ ë„˜ê²¨ì¤˜ë²„ë¦¬ë©´ í•„ìš”ì—†ëŠ” ë°ì´í„°ê¹Œì§€ ë°›ê¸´ í•˜ì§€ë§Œ, ê¸°ëŠ¥ ë™ì‘ì—ëŠ” ë¬¸ì œê°€ ì—†ë‹¤. 
> - ê·¸ëŸ¬ë‚˜ PW ì²˜ëŸ¼ ë³´ì•ˆìƒ ê°ì¶”ì–´ì•¼ í•  ì •ë³´ê¹Œì§€ ëª¨ë‘ JSONìœ¼ë¡œ í•¨ê»˜ ë„˜ì–´ê°€ê¸° ë•Œë¬¸ì—, ë³´ì•ˆ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
> - ì—”í‹°í‹° ì¸¡ì—ì„œ ì»¬ëŸ¼ì— @JsonIgnoreë¥¼ ì‚¬ìš©í•´ JSON ì „ë‹¬ì„ ë§‰ì„ ìˆ˜ëŠ” ìˆì§€ë§Œ, ì´ëŠ” ì—”í‹°í‹°ê°€ API ìŠ¤í™ì— ì˜ì¡´ì„±ì„ ê°–ê²Œ ë˜ë¯€ë¡œ ì¢‹ì§€ ì•Šë‹¤.

#### 3.ì—”í‹°í‹°ë¥¼ ê·¸ëŒ€ë¡œ ë„˜ê²¨ì¤„ ê²½ìš°, ì—”í‹°í‹°ê°€ ê°€ì§„ ì •ë³´ ì™¸ì˜ ê²ƒë“¤ì€ ë„˜ê²¨ì£¼ì§€ ëª»í•œë‹¤.
> - DTOë¥¼ ì‚¬ìš©í•˜ë©´ ì—”í‹°í‹°ì˜ ì •ë³´ ì™¸ì— ì¶”ê°€ì ìœ¼ë¡œ í•„ìš”í•œ ì •ë³´ë„ í•¨ê»˜ ë„˜ê²¨ì¤„ ìˆ˜ ìˆë‹¤.

### âœ”ï¸ ì˜ˆì‹œ (í”„ë¡œì íŠ¸ ì½”ë“œ)

```java
@Entity
@Table(name = "story")
@Getter
@NoArgsConstructor(access = AccessLevel.PROTECTED)
public class Story {

    @JsonIgnore
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "story_id")
    private Long id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "user_profile_id", nullable = false)
    private UserProfile userProfile;

    @Column(name = "contents", nullable = false, length = 500)
    private String contents;

    @Column(name = "like_count")
    private Long likeCount;

    @Column(name = "story_image")
    private String storyImageUrl;
    
    //...

    public void updateStory(StoryUpdateDto storyUpdateDto, String storyImageUrl){
        if(storyUpdateDto.getContents() != null )this.contents=storyUpdateDto.getContents();
        if(storyUpdateDto.getStoryImage() != null )this.storyImageUrl=storyImageUrl;
    }
}
```
```java
@Data
@AllArgsConstructor(staticName="of")
public class StoryUpdateDto {
    private Long storyId;
    private String contents;
    private MultipartFile storyImage;
}
```
<br>

ì¶œì²˜ 
- https://hudi.blog/data-transfer-object/
- https://codeung.tistory.com/319
 
[//]: # (- ![img_4.png]&#40;img_4.png&#41;)
<br>
